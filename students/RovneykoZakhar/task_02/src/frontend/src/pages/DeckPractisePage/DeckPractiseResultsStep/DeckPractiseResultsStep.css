@reference "tailwindcss";

@layer components {
  .DeckPractiseResultsStep {
    @apply w-full mx-auto grid gap-4;
    @apply max-w-6xl;
  }

  .DeckPractiseResultsStep__header {
    @apply grid gap-2;
  }

  .DeckPractiseResultsStep__title {
    @apply text-2xl font-bold mt-5;
  }

  .DeckPractiseResultsStep__stats {
    @apply flex flex-wrap gap-2;
  }

  .DeckPractiseResultsStep__chip {
    @apply px-3 py-1 rounded-full border border-white/10 bg-white/5 text-white/80 text-sm;
  }

  .DeckPractiseResultsStep__chip--ok {
    @apply border-emerald-400/20 bg-emerald-400/10 text-emerald-200;
  }

  .DeckPractiseResultsStep__chip--bad {
    @apply border-rose-400/20 bg-rose-400/10 text-rose-200;
  }

  .DeckPractiseResultsStep__empty {
    @apply rounded-2xl border border-white/10 bg-white/5 p-4 text-white/70;
  }

  .DeckPractiseResultsStep__list {
    @apply grid gap-3;
    @apply grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5;
  }

  /* ===== items (stagger) ===== */
  .DeckPractiseResultsStep__item {
    perspective: 1200px;
    -webkit-perspective: 1200px;

    opacity: 0;
    transform: translateY(10px);
    animation: ResultIn 240ms ease-out both;
    animation-delay: var(--d);
  }

  /* ===== card ===== */
  .DeckPractiseResultsStep__inner {
    @apply relative rounded-2xl overflow-hidden border border-white/10 bg-white/5;
    @apply shadow-[0_12px_40px_rgba(0,0,0,0.35)];

    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    will-change: transform, opacity;

    /* "сначала ничего": карточка ребром */
    transform: rotateY(-90deg);
    opacity: 0;

    /* разворот в нормальное положение */
    animation: ResultReveal 520ms cubic-bezier(0.2, 0.9, 0.2, 1) both;
    animation-delay: calc(var(--d) + 240ms);
  }

  /* подсветка по результату */
  .DeckPractiseResultsStep__item--ok .DeckPractiseResultsStep__inner {
    @apply border-emerald-400/20 bg-emerald-400/5;
  }

  .DeckPractiseResultsStep__item--bad .DeckPractiseResultsStep__inner {
    @apply border-rose-400/20 bg-rose-400/5;
  }

  .DeckPractiseResultsStep__innerContent {
    @apply h-full w-full p-4 grid gap-3;

    opacity: 0;
    transform: translateY(6px);
    will-change: transform, opacity;

    animation: ResultContentIn 220ms ease-out both;
    animation-delay: calc(var(--d) + 240ms + 360ms);
  }

  .DeckPractiseResultsStep__topRow {
    @apply flex items-center justify-between;
  }

  .DeckPractiseResultsStep__idx {
    @apply text-white/65 text-sm;
  }

  .DeckPractiseResultsStep__badge {
    @apply px-2.5 py-1 rounded-full text-xs border bg-white/5 border-white/10 text-white/80;
  }

  .DeckPractiseResultsStep__badge--ok {
    @apply border-emerald-400/25 bg-emerald-400/10 text-emerald-200;
  }

  .DeckPractiseResultsStep__badge--bad {
    @apply border-rose-400/25 bg-rose-400/10 text-rose-200;
  }

  .DeckPractiseResultsStep__block {
    @apply rounded-xl border border-white/10 bg-white/4 p-3 grid gap-1;
  }

  .DeckPractiseResultsStep__label {
    @apply text-xs uppercase tracking-widest text-white/55;
  }

  .DeckPractiseResultsStep__text {
    @apply text-white/85 font-medium leading-snug break-words;
  }

  .DeckPractiseResultsStep__text--accent {
    @apply text-white font-semibold;
  }

  .DeckPractiseResultsStep__bottom {
    @apply pt-2 flex;
  }

  .DeckPractiseResultsStep__restart {
    @apply w-full max-w-3xs mx-auto rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white/90;
    @apply hover:bg-white/10;
  }

  /* ===== animations ===== */
  @keyframes ResultIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes ResultReveal {
    0% {
      opacity: 0;
      transform: rotateY(-90deg);
    }
    60% {
      opacity: 1;
    }
    100% {
      opacity: 1;
      transform: rotateY(0deg);
    }
  }

  @keyframes ResultContentIn {
    from {
      opacity: 0;
      transform: translateY(6px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}
